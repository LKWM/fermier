<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ï¥àÎ≥¥ ÎÜçÎ∂Ä ÏßÑÏàò - Ï¢ÖÌï© ÌÖåÏä§Ìä∏</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Noto+Sans+KR:wght@300;400;500;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Gowun Dodum', 'Noto Sans KR', sans-serif; -webkit-font-smoothing: antialiased; }
        .app-container { font-family: 'Gowun Dodum', 'Noto Sans KR', sans-serif; }
        .font-bold { font-weight: 700; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        
        .option-btn { transition: all 0.2s ease; }
        .option-btn:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-neutral-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icons ---
        const CheckCircle = ({ size = 24, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>);
        const XCircle = ({ size = 24, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>);
        const ArrowRight = ({ size = 24, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>);
        const Play = ({ size = 24, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="5 3 19 12 5 21 5 3"/></svg>);
        
        // --- Quiz Data ---
        const QUIZ_DATA = [
            {
                id: 1,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "ÏßÑÏàòÍ∞Ä Ï£ºÎßêÎÜçÏû•ÏùÑ ÏãúÏûëÌïòÍ∏∞Î°ú Í≤∞Ïã¨Ìïú Ïù¥Ïú†Îäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                questionFr: "Pourquoi Jinsu a-t-il d√©cid√© de commencer une ferme de week-end ?",
                options: ["ÎèÑÏãú ÏÉùÌôúÏù¥ ÏßÄÎ£®Ìï¥ÏÑú", "ÎèàÏùÑ ÎßéÏù¥ Î≤åÍ≥† Ïã∂Ïñ¥ÏÑú", "ÏπúÍµ¨Í∞Ä Í∂åÏú†Ìï¥ÏÑú", "ÌöåÏÇ¨Í∞Ä ÎÑàÎ¨¥ Î©ÄÏñ¥ÏÑú"],
                answer: 0,
                explanation: "Au chapitre 1, Jinsu s'ennuie de la vie urbaine et veut toucher la terre et transpirer."
            },
            {
                id: 2,
                type: "Îã®Ïñ¥",
                context: "ÏßÑÏàòÎäî ÏãúÏû•Ïóê Í∞ÄÏÑú ____, Ïû•Ìôî, Ïî®ÏïóÏùÑ ÏÉÄÏñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ Îã®Ïñ¥Îäî?",
                questionFr: "Quel mot convient pour remplir le vide ?",
                options: ["Ïª¥Ìì®ÌÑ∞", "Ìò∏ÎØ∏", "ÏûêÎèôÏ∞®", "Ïö∞ÏÇ∞"],
                answer: 1,
                explanation: "Au chapitre 2, Jinsu a achet√© une 'Ìò∏ÎØ∏' (Homi), un outil agricole traditionnel cor√©en, pour creuser la terre."
            },
            {
                id: 3,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÏßÑÏàòÎäî Ìò∏ÎØ∏___ ÎïÖÏùÑ ÌååÏöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ Ï°∞ÏÇ¨Îäî?",
                questionFr: "Quelle particule convient pour remplir le vide ?",
                options: ["Í∞Ä", "Î•º", "Î°ú", "Ïóê"],
                answer: 2,
                explanation: "On utilise la particule '-(Ïúº)Î°ú' pour indiquer un outil ou un moyen. Comme il utilise une 'homi', 'Ìò∏ÎØ∏Î°ú' est correct."
            },
            {
                id: 4,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "4Ïû•ÏóêÏÑú Ïî®ÏïóÏùÑ Ïã¨Í≥† ÏùºÏ£ºÏùºÏù¥ ÏßÄÎÇ¨ÏùÑ ÎïåÏùò ÏÉÅÌô©ÏúºÎ°ú ÏïåÎßûÏùÄ Í≤ÉÏùÄ?",
                questionFr: "Quelle est la situation correcte une semaine apr√®s avoir plant√© les graines au chapitre 4 ?",
                options: ["ÏãπÏù¥ ÏïÑÏ£º ÎßéÏù¥ ÎÇòÏôîÎã§", "ÏãπÏù¥ ÎÇòÏò§ÏßÄ ÏïäÏïÑ ÏßÑÏàòÍ∞Ä Î∂àÏïàÌï¥ÌñàÎã§", "Ïù¥ÎØ∏ ÍΩÉÏù¥ ÌîºÏóàÎã§", "ÌÜ†ÎßàÌÜ†Î•º ÏàòÌôïÌñàÎã§"],
                answer: 1,
                explanation: "Au chapitre 4, Jinsu √©tait inquiet car aucune pousse n'√©tait sortie m√™me apr√®s une semaine."
            },
            {
                id: 5,
                type: "Îã®Ïñ¥",
                question: "'ÎìúÎîîÏñ¥', 'ÎßàÏπ®ÎÇ¥'ÏôÄ ÎπÑÏä∑Ìïú ÎúªÏùÑ Í∞ÄÏßÑ Îã®Ïñ¥Îäî?",
                questionFr: "Quel mot a un sens similaire √† 'ÎìúÎîîÏñ¥' (enfin) et 'ÎßàÏπ®ÎÇ¥' (finalement) ?",
                options: ["Î≤åÏç®", "ÏïÑÏßÅ", "Í≤∞Íµ≠", "Î∞©Í∏à"],
                answer: 2,
                explanation: "'ÎìúÎîîÏñ¥', 'ÎßàÏπ®ÎÇ¥' et 'Í≤∞Íµ≠' sont utilis√©s lorsque quelque chose attendu depuis longtemps se r√©alise enfin."
            },
            {
                id: 6,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÏûéÏù¥ ÎÖ∏Îûó___ Î≥ÄÌñàÏñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ ÎßêÏùÄ?",
                questionFr: "Quelle forme convient pour remplir le vide ?",
                options: ["Îã§", "ÏùÄ", "Í≤å", "ÏÑú"],
                answer: 2,
                explanation: "En ajoutant '-Í≤å' √† la racine d'un adjectif, on peut l'utiliser comme un adverbe pour modifier un verbe (ex: ÎÖ∏ÎûóÍ≤å Î≥ÄÌïòÎã§ - devenir jaune)."
            },
            {
                id: 7,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "Ïù¥ÏõÉÏßë Ìï†ÏïÑÎ≤ÑÏßÄÍ∞Ä ÏßÑÏàòÏóêÍ≤å Ìï¥Ï§Ä Ï°∞Ïñ∏ÏùÄ Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                questionFr: "Quel conseil le grand-p√®re voisin a-t-il donn√© √† Jinsu ?",
                options: ["Î¨ºÏùÑ Îß§Ïùº ÏûîÎú© Ï£ºÍ±∞Îùº", "ÏãùÎ¨ºÎèÑ Ïâ¥ ÏãúÍ∞ÑÏù¥ ÌïÑÏöîÌïòÎã§", "ÎπÑÎ£åÎ•º Îçî ÎßéÏù¥ Ï£ºÏñ¥Îùº", "ÎÖ∏ÎûòÎ•º Î∂àÎü¨ Ï£ºÏñ¥Îùº"],
                answer: 1,
                explanation: "Au chapitre 6, le grand-p√®re a conseill√© √† Jinsu de ne pas trop d√©ranger les plantes et de leur laisser du temps pour se reposer."
            },
            {
                id: 8,
                type: "Îã®Ïñ¥",
                question: "'Í±±Ï†ïÏù¥ Ìï¥Í≤∞ÎêòÏñ¥ ÎßàÏùåÏù¥ ÎÜìÏù¥Îã§'ÎùºÎäî ÎúªÏùò Í¥ÄÏö© ÌëúÌòÑÏùÄ?",
                questionFr: "Quelle expression idiomatique signifie '√™tre soulag√© apr√®s la r√©solution d'un souci' ?",
                options: ["Í∞ÄÏä¥ÏùÑ ÏπòÎã§", "Í∞ÄÏä¥Ïù¥ ÏïÑÌîÑÎã§", "Í∞ÄÏä¥ÏùÑ Ïì∏Ïñ¥ÎÇ¥Î¶¨Îã§", "Í∞ÄÏä¥Ïù¥ Îõ∞Îã§"],
                answer: 2,
                explanation: "Au chapitre 8, apr√®s le passage du typhon, Jinsu a 'Í∞ÄÏä¥ÏùÑ Ïì∏Ïñ¥ÎÇ¥Î¶¨Îã§' (√©t√© soulag√©)."
            },
            {
                id: 9,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÏßÄÏßÄÎåÄÎ•º ÏÑ∏ÏõåÎëî ____ Îã§ÌñâÌûà ÌÜ†ÎßàÌÜ†Í∞Ä Ïì∞Îü¨ÏßÄÏßÄ ÏïäÏïòÏñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ ÎßêÏùÄ?",
                questionFr: "Quel mot convient pour remplir le vide ?",
                options: ["ÎçïÎ∂ÑÏóê", "ÎïåÎ¨∏Ïóê", "Ïù¥ÎùºÏÑú", "ÎãàÍπå"],
                answer: 0,
                explanation: "On utilise 'ÎçïÎ∂ÑÏóê' (gr√¢ce √†) pour indiquer une cause ayant un r√©sultat positif."
            },
            {
                id: 10,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "ÏßÑÏàòÍ∞Ä ÌÉúÌíçÏùÑ ÎåÄÎπÑÌï¥ ÎØ∏Î¶¨ Ìï¥Îëî ÏùºÏùÄ Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                questionFr: "Qu'est-ce que Jinsu a fait √† l'avance pour se pr√©parer au typhon ?",
                options: ["ÎπÑÎãêÌïòÏö∞Ïä§Î•º ÏßÄÏóàÎã§", "ÏßÄÏßÄÎåÄÎ•º ÏÑ∏Ïõå ÎëêÏóàÎã§", "ÎØ∏Î¶¨ ÏàòÌôïÏùÑ ÌñàÎã§", "ÏïÑÎ¨¥Í≤ÉÎèÑ ÌïòÏßÄ ÏïäÏïòÎã§"],
                answer: 1,
                explanation: "Au chapitre 8, gr√¢ce aux tuteurs (ÏßÄÏßÄÎåÄ) que Jinsu avait install√©s, les tomates ne sont pas tomb√©es."
            },
            {
                id: 11,
                type: "Îã®Ïñ¥",
                question: "'Î≥¥ÎûåÏù¥ ÏûàÎã§'Ïùò ÏùòÎØ∏ÏôÄ Í∞ÄÏû• Í∞ÄÍπåÏö¥ ÏÉÅÌô©ÏùÄ?",
                questionFr: "Quelle situation est la plus proche du sens de 'Î≥¥ÎûåÏù¥ ÏûàÎã§' (valoir la peine) ?",
                options: ["ÌûòÎì† ÏùºÏùÑ ÌñàÏßÄÎßå Í≤∞Í≥ºÍ∞Ä Ï¢ãÏïÑÏÑú ÎßåÏ°±Ïä§ÎüΩÎã§", "ÏùºÏùÑ ÌïòÍ∏∞ Ïã´Ïñ¥ÏÑú ÎØ∏Î£®Í≥† Ïã∂Îã§", "Ïã§ÏàòÎ•º Ìï¥ÏÑú Í∏∞Î∂ÑÏù¥ ÎÇòÏÅòÎã§", "ÏïÑÎ¨¥ ÏùºÎèÑ ÏùºÏñ¥ÎÇòÏßÄ ÏïäÏïòÎã§"],
                answer: 0,
                explanation: "On dit 'Î≥¥ÎûåÏù¥ ÏûàÎã§' lorsqu'on obtient un bon r√©sultat ou une satisfaction apr√®s avoir fait un effort."
            },
            {
                id: 12,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÏßÑÏàòÎäî Ïö∏____ Ïã∂Ïñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ ÎßêÏùÄ?",
                questionFr: "Quelle forme convient pour remplir le vide ?",
                options: ["Ïñ¥", "Í≥†", "Îü¨", "ÏÑú"],
                answer: 1,
                explanation: "Ajouter '-Í≥† Ïã∂Ïñ¥Ïöî' √† un verbe exprime un souhait ou un d√©sir (vouloir). (Ïö∏Í≥† Ïã∂Ïñ¥Ïöî - avoir envie de pleurer)"
            },
            {
                id: 13,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "ÏßÑÏàòÍ∞Ä ÏàòÌôïÌïú Ï±ÑÏÜåÏùò ÌäπÏßïÏúºÎ°ú ÏïåÎßûÏùÄ Í≤ÉÏùÄ?",
                questionFr: "Quelle est la caract√©ristique correcte des l√©gumes r√©colt√©s par Jinsu ?",
                options: ["ÎßàÌä∏ Í≤ÉÎ≥¥Îã§ ÏòàÏÅòÍ≤å ÏÉùÍ≤ºÎã§", "ÎßàÌä∏ Í≤ÉÎ≥¥Îã§ Î™ªÏÉùÍ≤ºÏßÄÎßå ÎπõÎÇúÎã§", "ÎßõÏù¥ ÏóÜÎã§", "ÏÉâÍπîÏù¥ Ìù¨ÎØ∏ÌïòÎã§"],
                answer: 1,
                explanation: "Au chapitre 9, il est dit que les l√©gumes de Jinsu sont plus moches que ceux du supermarch√©, mais qu'ils brillent beaucoup plus."
            },
            {
                id: 14,
                type: "Îã®Ïñ¥",
                question: "Îã§Ïùå Ï§ë 'ÏãùÎ¨º'Í≥º Í¥ÄÎ†®Ïù¥ ÏóÜÎäî Îã®Ïñ¥Îäî?",
                questionFr: "Lequel des mots suivants n'est pas li√© aux 'plantes' ?",
                options: ["ÎøåÎ¶¨", "Ïûé", "Ïó¥Îß§", "ÏûêÎèôÏ∞®"],
                answer: 3,
                explanation: "'ÎøåÎ¶¨' (racine), 'Ïûé' (feuille) et 'Ïó¥Îß§' (fruit) sont des parties d'une plante. 'ÏûêÎèôÏ∞®' est une voiture."
            },
            {
                id: 15,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "Ïπ≠Ï∞¨ÏùÑ ____ ÌîºÍ≥§Ìï®Ïù¥ ÏÇ¨ÎùºÏ†∏Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ ÎßêÏùÄ?",
                questionFr: "Quelle forme convient pour remplir le vide ?",
                options: ["Îì£Î≥¥Îãà", "Îì§ÏúºÎãà", "Îì£ÏúºÎãà", "Îì§Î≥¥Îãà"],
                answer: 1,
                explanation: "'Îì£Îã§' (√©couter) est un verbe irr√©gulier en '„Ñ∑'. Devant une voyelle, le '„Ñ∑' se change en '„Ñπ', ce qui donne 'Îì§ÏúºÎãà'."
            },
            {
                id: 16,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "ÏßÑÏàòÎäî ÏàòÌôïÌïú Ï±ÑÏÜåÎ•º Ïñ¥ÎñªÍ≤å ÌñàÎÇòÏöî?",
                questionFr: "Qu'a fait Jinsu des l√©gumes r√©colt√©s ?",
                options: ["ÌòºÏûê Îã§ Î®πÏóàÎã§", "ÏãúÏû•Ïóê ÎÇ¥Îã§ ÌåîÏïòÎã§", "ÌöåÏÇ¨ ÎèôÎ£åÎì§Í≥º ÎÇòÎà† Î®πÏóàÎã§", "Î≤ÑÎ†∏Îã§"],
                answer: 2,
                explanation: "Au chapitre 10, Jinsu a apport√© les l√©gumes au travail et les a partag√©s avec ses coll√®gues."
            },
            {
                id: 17,
                type: "Îã®Ïñ¥",
                question: "'Îß§Ïùº'Í≥º Î∞îÍæ∏Ïñ¥ Ïì∏ Ïàò ÏûàÎäî ÌëúÌòÑÏùÄ?",
                questionFr: "Quelle expression peut remplacer 'Îß§Ïùº' (tous les jours) ?",
                options: ["Í∞ÄÎÅî", "ÎÇ†ÎßàÎã§", "Ïñ¥Ï†ú", "ÎÇ¥Ïùº"],
                answer: 1,
                explanation: "'Îß§Ïùº' a le m√™me sens que 'ÎÇ†ÎßàÎã§' (chaque jour)."
            },
            {
                id: 18,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÎèôÎ£åÎì§____ Ï±ÑÏÜåÎ•º ÎÇòÎà† Ï§¨Ïñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê ÏïåÎßûÏùÄ Ï°∞ÏÇ¨Îäî?",
                questionFr: "Quelle particule convient pour remplir le vide ?",
                options: ["Ïù¥", "Í∞Ä", "ÏóêÍ≤å", "ÏùÑ"],
                answer: 2,
                explanation: "On utilise la particule '-ÏóêÍ≤å' (√†) pour indiquer le destinataire d'une action (une personne)."
            },
            {
                id: 19,
                type: "ÎÇ¥Ïö© ÏùºÏπò",
                question: "ÏßÑÏàòÍ∞Ä ÎÇ¥ÎÖÑÏóê Ïã¨Ïñ¥Î≥¥Í≥† Ïã∂Îã§Í≥† Ìïú ÏûëÎ¨ºÏùÄ?",
                questionFr: "Quelle culture Jinsu a-t-il dit vouloir essayer de planter l'ann√©e prochaine ?",
                options: ["ÏàòÎ∞ï", "Í≥†Íµ¨Îßà", "Í≥†Ï∂î", "Î≤º"],
                answer: 2,
                explanation: "√Ä la fin du chapitre 10, Jinsu a d√©cid√© d'essayer de planter des 'Í≥†Ï∂î' (piments) l'ann√©e prochaine."
            },
            {
                id: 20,
                type: "ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞",
                context: "ÎßàÌä∏ÏóêÏÑú ÌååÎäî Í≤É____ Î™ªÏÉùÍ≤ºÏñ¥Ïöî.",
                question: "ÎπàÏπ∏Ïóê Îì§Ïñ¥Í∞à ÏïåÎßûÏùÄ Ï°∞ÏÇ¨Îäî?",
                questionFr: "Quelle particule convient pour remplir le vide ?",
                options: ["ÎèÑ", "Î≥¥Îã§", "ÏùÄ", "ÏùÑ"],
                answer: 1,
                explanation: "La particule '-Î≥¥Îã§' est utilis√©e pour la comparaison (que / par rapport √†)."
            }
        ];

        const SOUNDS = {
            correct: 'https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3',
            wrong: 'https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.mp3',
            finish: 'https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3'
        };

        const App = () => {
            const [view, setView] = useState('cover');
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [status, setStatus] = useState('idle'); 
            const [selectedOption, setSelectedOption] = useState(null);

            const currentQ = QUIZ_DATA[currentQIndex];

            const playSound = (type) => {
                const audio = new Audio(SOUNDS[type]);
                audio.volume = 0.5;
                audio.play().catch(() => {});
            };

            const startQuiz = () => {
                setView('quiz');
                playSound('correct');
            };

            const handleOptionClick = (index) => {
                if (status === 'correct' || status === 'wrong_fail') return;

                setSelectedOption(index);

                if (index === currentQ.answer) {
                    if (status === 'idle') {
                        setScore(prev => prev + 1);
                    }
                    setStatus('correct');
                    playSound('correct');
                } else {
                    playSound('wrong');
                    if (status === 'idle') {
                        setStatus('wrong_once');
                    } else if (status === 'wrong_once') {
                        setStatus('wrong_fail');
                    }
                }
            };

            const handleNext = () => {
                if (currentQIndex < QUIZ_DATA.length - 1) {
                    setCurrentQIndex(prev => prev + 1);
                    setStatus('idle');
                    setSelectedOption(null);
                } else {
                    // Quiz finished
                    setView('result');
                    playSound('finish');
                    
                    // Auto-send lesson completion message
                    if (window.parent) {
                        window.parent.postMessage({
                            type: 'lesson_complete'
                        }, '*');
                    }
                }
            };

            if (view === 'cover') {
                return (
                    <div className="min-h-screen w-full flex flex-col items-center justify-center bg-green-50 app-container p-6 text-center animate-fadeIn">
                        <div className="w-24 h-24 bg-white rounded-full flex items-center justify-center text-5xl shadow-md mb-6 border-4 border-green-200">
                           ‚úèÔ∏è
                        </div>
                        <h1 className="text-3xl md:text-4xl font-extrabold text-green-900 mb-4 leading-snug break-keep">
                            Î≥¥Ï∂©ÏàòÏóÖ: Ï¢ÖÌï© ÌÖåÏä§Ìä∏
                        </h1>
                        <p className="text-slate-600 mb-10 text-lg">
                            1Ïû•Î∂ÄÌÑ∞ 10Ïû•ÍπåÏßÄ Î∞∞Ïö¥ ÎÇ¥Ïö©ÏùÑ<br/>ÌôïÏù∏Ìï¥ Î≥ºÍπåÏöî?
                        </p>
                        <button 
                            onClick={startQuiz}
                            className="bg-green-600 text-white px-10 py-4 rounded-full font-bold text-xl shadow-lg hover:bg-green-700 hover:scale-105 transition-all flex items-center gap-3"
                        >
                            <Play size={24} fill="currentColor" /> ÌÖåÏä§Ìä∏ ÏãúÏûë
                        </button>
                    </div>
                );
            }

            if (view === 'result') {
                return (
                    <div className="min-h-screen w-full flex flex-col items-center justify-center bg-green-50 app-container p-6 text-center animate-fadeIn">
                        <div className="bg-white p-10 rounded-3xl shadow-xl w-full max-w-lg border-2 border-green-100">
                            <div className="mb-6 text-6xl">üéâ</div>
                            <h1 className="text-3xl font-bold text-green-800 mb-2">ÌÖåÏä§Ìä∏ ÏôÑÎ£å!</h1>
                            <p className="text-slate-600 mb-8">ÏàòÍ≥†ÌïòÏÖ®ÏäµÎãàÎã§. (F√©licitations!)</p>
                            
                            <div className="bg-green-100 rounded-xl p-6 mb-8">
                                <span className="block text-sm text-green-600 mb-1">Ï¥ù Ï†êÏàò</span>
                                <span className="text-5xl font-bold text-green-700">{score}</span>
                                <span className="text-xl text-green-600"> / 20</span>
                            </div>

                            <p className="text-lg text-slate-700 font-medium mb-8 leading-relaxed">
                                {score === 20 ? "Parfait ! Vous √™tes un vrai fermier !" : 
                                 score >= 15 ? "Excellent ! On r√©vise encore un peu ?" :
                                 "Pas mal ! R√©√©coutez les histoires encore une fois."}
                            </p>
                            
                            {/* Buttons removed as requested */}
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen w-full flex flex-col bg-neutral-50 app-container">
                    <header className="h-16 bg-white border-b border-green-100 flex items-center justify-between px-6 shrink-0">
                        <span className="text-green-800 font-bold">Ï¢ÖÌï© ÌÖåÏä§Ìä∏</span>
                        <div className="flex items-center gap-2">
                            <span className="text-sm text-slate-400">Î¨∏Ï†ú</span>
                            <span className="text-green-600 font-bold text-lg">{currentQIndex + 1}</span>
                            <span className="text-slate-300">/</span>
                            <span className="text-slate-500">{QUIZ_DATA.length}</span>
                        </div>
                    </header>

                    <main className="flex-1 w-full max-w-2xl mx-auto p-6 flex flex-col justify-center overflow-y-auto custom-scrollbar">
                        <div className="mb-8">
                            <span className="inline-block px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full mb-4">
                                {currentQ.type}
                            </span>
                            
                            <h2 className="text-2xl md:text-3xl font-bold text-slate-800 leading-snug break-keep mb-6">
                                {currentQ.question}
                            </h2>

                            {currentQ.context && (
                                <div className="bg-white p-5 rounded-xl border-2 border-slate-200 mb-2 shadow-sm text-lg md:text-xl font-medium text-slate-700 text-center leading-relaxed">
                                    "{currentQ.context}"
                                </div>
                            )}

                            {(status === 'wrong_once' || status === 'wrong_fail') && (
                                <p className="mt-4 text-green-600 font-medium italic bg-green-50 p-3 rounded-lg border border-green-100 animate-fadeIn">
                                    üí° {currentQ.questionFr}
                                </p>
                            )}
                        </div>

                        <div className="space-y-3">
                            {currentQ.options.map((option, idx) => {
                                let btnClass = "w-full text-left p-5 rounded-2xl border-2 transition-all font-medium text-lg relative ";
                                if (status === 'correct' && idx === currentQ.answer) {
                                    btnClass += "bg-green-50 border-green-500 text-green-800";
                                } else if (status === 'wrong_fail' && idx === currentQ.answer) {
                                    btnClass += "bg-green-50 border-green-500 text-green-800";
                                } else if (status === 'wrong_fail' && idx === selectedOption) {
                                    btnClass += "bg-red-50 border-red-200 text-red-400 opacity-70";
                                } else if (status === 'wrong_once' && idx === selectedOption) {
                                    btnClass += "bg-orange-50 border-orange-300 text-orange-700";
                                } else {
                                    btnClass += "bg-white border-slate-100 text-slate-600 hover:border-green-200 hover:bg-slate-50";
                                }

                                return (
                                    <button 
                                        key={idx}
                                        onClick={() => handleOptionClick(idx)}
                                        disabled={status === 'correct' || status === 'wrong_fail'}
                                        className={btnClass}
                                    >
                                        {option}
                                        {(status === 'correct' || status === 'wrong_fail') && idx === currentQ.answer && (
                                            <CheckCircle className="absolute right-5 top-1/2 -translate-y-1/2 text-green-600" />
                                        )}
                                        {(status === 'wrong_once' || status === 'wrong_fail') && idx === selectedOption && idx !== currentQ.answer && (
                                            <XCircle className="absolute right-5 top-1/2 -translate-y-1/2 text-orange-500" />
                                        )}
                                    </button>
                                );
                            })}
                        </div>

                        <div className="mt-8 min-h-[120px]">
                            {status === 'correct' && (
                                <div className="bg-green-50 p-5 rounded-2xl border border-green-100 animate-fadeIn">
                                    <div className="flex items-center gap-2 mb-2 text-green-700 font-bold">
                                        <CheckCircle size={20}/> Correct !
                                    </div>
                                    <p className="text-slate-600 text-sm md:text-base leading-relaxed mb-4">
                                        {currentQ.explanation}
                                    </p>
                                    <button onClick={handleNext} className="w-full bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 flex items-center justify-center gap-2">
                                        Suivant <ArrowRight size={18}/>
                                    </button>
                                </div>
                            )}

                            {status === 'wrong_once' && (
                                <div className="bg-orange-50 p-5 rounded-2xl border border-orange-100 animate-fadeIn text-center">
                                    <p className="text-orange-800 font-bold mb-1">Dommage !</p>
                                    <p className="text-orange-600 text-sm">R√©essayez encore une fois. (1 essai restant)</p>
                                </div>
                            )}

                            {status === 'wrong_fail' && (
                                <div className="bg-slate-50 p-5 rounded-2xl border border-slate-200 animate-fadeIn">
                                    <div className="flex items-center gap-2 mb-2 text-slate-700 font-bold">
                                        <XCircle size={20}/> Incorrect.
                                    </div>
                                    <p className="text-slate-600 text-sm md:text-base leading-relaxed mb-4">
                                        La r√©ponse est <span className="font-bold text-green-600">"{currentQ.options[currentQ.answer]}"</span>.<br/>
                                        <span className="text-xs text-slate-500 mt-1 block">{currentQ.explanation}</span>
                                    </p>
                                    <button onClick={handleNext} className="w-full bg-slate-800 text-white py-3 rounded-xl font-bold hover:bg-slate-900 flex items-center justify-center gap-2">
                                        Suivant <ArrowRight size={18}/>
                                    </button>
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
